(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b333ca30"],{"230e8":function(t,e,n){"use strict";var a=n("70d9"),r=n.n(a);r.a},"70d9":function(t,e,n){},"7de8":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-4 col-sm-3"},[t._v("\r\n          Id: "+t._s(t.product.id)+"\r\n        ")]),n("div",{staticClass:"col-4 col-sm-3"},[t._v("\r\n          启用："),n("a-switch",{on:{change:function(e){t.pVariant="primary"}},model:{value:t.product.enable,callback:function(e){t.$set(t.product,"enable",e)},expression:"product.enable"}})],1),n("div",{staticClass:"col-4 col-sm-3"},[n("b-button",{attrs:{variant:t.pVariant,disabled:"secondary"===t.pVariant},on:{click:function(e){t.productChange()}}},[t._v("更改\r\n          ")])],1)])]),n("b-form-group",[n("div",{staticClass:"row my-2"},[n("b-input-group",{staticClass:"col-6 col-sm-3 mb-2",attrs:{prepend:"流量",append:"GB"}},[n("b-form-input",{attrs:{value:t.flow,type:"number"},on:{change:function(e){t.flowChanged(e)}}})],1),n("b-input-group",{staticClass:"col-6 col-sm-3 mb-2",attrs:{prepend:"价格",append:"元"}},[n("b-form-input",{attrs:{type:"number"},on:{change:function(e){t.pVariant="primary"}},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}})],1),n("b-input-group",{staticClass:"col-6 col-sm-3 mb-2",attrs:{prepend:"时长",append:"天"}},[n("b-form-input",{attrs:{value:t.duration,type:"number"},on:{change:function(e){t.durationChanged(e)}}})],1),n("b-input-group",{staticClass:"col-6 col-sm-3 mb-2",attrs:{prepend:"缓冲期",append:"时"}},[n("b-form-input",{attrs:{value:t.bufferPeriod,type:"number"},on:{change:function(e){t.bufferChanged(e)}}})],1)],1),n("div",{staticClass:"row"},[n("div",{staticClass:"mt-2 col-12 col-sm-6"},[n("product-qrcode",{attrs:{qrcode:t.alipay,category:"alipay"},on:{update:function(e){t.updateQrcode(e)},delete:function(e){t.deleteQrcode(e)}}})],1),n("div",{staticClass:"mt-2 col-12 col-sm-6"},[n("product-qrcode",{attrs:{qrcode:t.wechatpay,category:"wechatpay"},on:{update:function(e){t.updateQrcode(e)},delete:function(e){t.deleteQrcode(e)}}})],1)])])],1)],1)},r=[],o=(n("ac4d"),n("8a81"),n("ac6a"),n("be94")),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-card",{attrs:{title:t.category}},[n("div",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"text-center",attrs:{title:"点击选择新的二维码"}},[n("img",{staticClass:"border",staticStyle:{"min-height":"150px","min-width":"150px","max-height":"300px","max-width":"300px"},attrs:{src:"data:image/png;base64, "+t.image},on:{click:function(e){t.showFile=!t.showFile}}})]),n("b-collapse",{attrs:{id:"qrcodeImageUploader"},model:{value:t.showFile,callback:function(e){t.showFile=e},expression:"showFile"}},[n("div",{staticClass:"my-2"},[n("b-form-file",{attrs:{value:t.file,state:Boolean(t.file),placeholder:"更换二维码"},on:{change:function(e){t.fileChanged(e)}}}),n("div",{staticClass:"mt-3"},[n("span",[t._v("Selected file: "+t._s(t.file&&t.file.name))]),n("span",{staticClass:"float-right"})])],1)]),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("b-form-group",{staticClass:"mb-2"},[n("b-input-group",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{prepend:"描述",title:"便于管理员区分不同的二维码"}},[n("b-form-input",{on:{change:function(e){t.updated=!0}},model:{value:t.qrcode.desc,callback:function(e){t.$set(t.qrcode,"desc",e)},expression:"qrcode.desc"}})],1),n("b-input-group",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{prepend:"标记",title:"保留的字段"}},[n("b-form-input",{on:{change:function(e){t.updated=!0}},model:{value:t.qrcode.remark,callback:function(e){t.$set(t.qrcode,"remark",e)},expression:"qrcode.remark"}})],1),n("b-input-group",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],attrs:{prepend:"路径",title:"保存在服务器上的路径"}},[n("b-form-input",{on:{change:function(e){t.updated=!0}},model:{value:t.qrcode.path,callback:function(e){t.$set(t.qrcode,"path",e)},expression:"qrcode.path"}})],1)],1),n("div",[n("b-button",{attrs:{variant:"primary",disabled:!t.updated},on:{click:function(e){t.$emit("update",t.qrcode)}}},[t._v("上传")]),n("b-button",{staticClass:"float-right",on:{click:function(e){t.$emit("delete",t.qrcode)}}},[t._v("删除")])],1)],1)],1)},c=[],u=(n("7f7f"),["image/jpeg","image/pjpeg","image/jpg","image/png","image/gif"]);function d(t){for(var e=0;e<u.length;e++)if(t.type===u[e])return!0;return!1}var s={name:"productQrcode",props:{qrcode:Object,category:String},data:function(){return{file:null,showFile:!1,image:null,updated:!1}},watch:{qrcode:function(t,e){this.qrcode.qrcode&&(this.image=this.qrcode.qrcode)}},created:function(){this.qrcode.qrcode&&(this.image=this.qrcode.qrcode)},methods:{fileChanged:function(t){var e=this,n=t.target.files[0];if(this.file=n,d(n)){var a=new FileReader;a.readAsBinaryString(n),a.onload=function(t){e.image=btoa(t.target.result),e.qrcode.qrcode=e.image,e.updated=!0}}else this.file=null,alert("File name "+n.name+": Not a valid file type. Update your selection.")}}},l=s,p=(n("230e8"),n("2877")),f=Object(p["a"])(l,i,c,!1,null,null,null);f.options.__file="ProductQrcode.vue";var m=f.exports,b=n("be6c"),h={name:"productDetail",components:{ProductQrcode:m},data:function(){return{product:{flow:10,price:4,duration:30,bufferPeriod:20},alipay:{pid:-1,category:"alipay",desc:"",qrcode:"R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="},wechatpay:{pid:-1,category:"wechatpay",desc:"",qrcode:"R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="},pVariant:"secondary",durationUnit:"月"}},computed:{bufferPeriod:function(){return this.product.bufferPeriod/3600},duration:function(){return this.product.duration/3600/24},flow:function(){return this.product.flow/1024}},methods:{updateQrcode:function(t){var e=Object(o["a"])({},t,{productId:this.product.id});Object(b["t"])(e).then(function(t){"success"===t.status?location.reload():alert("Something Wrong")})},deleteQrcode:function(t){var e={id:t.id};Object(b["c"])(e).then(function(t){"success"===t.status?location.reload():alert("Something Wrong")})},flowChanged:function(t){this.pVariant="primary",this.product.flow=1024*t},bufferChanged:function(t){this.pVariant="primary",this.product.bufferPeriod=3600*t},durationChanged:function(t){this.pVariant="primary",this.product.duration=3600*t},productChange:function(){var t=this;Object(b["s"])(Object(o["a"])({},this.product)).then(function(e){t.pVariant="secondary"})}},created:function(){var t=this;Object(b["m"])({id:this.$route.params.id}).then(function(e){if("success"===e.status){t.product=e.product;var n=!0,a=!1,r=void 0;try{for(var o,i=e.qrcodes[Symbol.iterator]();!(n=(o=i.next()).done);n=!0){var c=o.value;c&&("alipay"===c.category?t.alipay=c:"wechatpay"===c.category&&(t.wechatpay=c))}}catch(u){a=!0,r=u}finally{try{n||null==i.return||i.return()}finally{if(a)throw r}}}})}},g=h,v=Object(p["a"])(g,a,r,!1,null,null,null);v.options.__file="ProductDetail.vue";e["default"]=v.exports},be6c:function(t,e,n){"use strict";n.d(e,"f",function(){return r}),n.d(e,"m",function(){return o}),n.d(e,"s",function(){return i}),n.d(e,"t",function(){return c}),n.d(e,"c",function(){return u}),n.d(e,"h",function(){return d}),n.d(e,"n",function(){return s}),n.d(e,"e",function(){return l}),n.d(e,"d",function(){return p}),n.d(e,"l",function(){return f}),n.d(e,"g",function(){return m}),n.d(e,"k",function(){return b}),n.d(e,"j",function(){return h}),n.d(e,"o",function(){return g}),n.d(e,"r",function(){return v}),n.d(e,"q",function(){return A}),n.d(e,"p",function(){return y}),n.d(e,"u",function(){return w}),n.d(e,"a",function(){return j}),n.d(e,"i",function(){return O}),n.d(e,"b",function(){return C});n("cadf"),n("551c"),n("097d");var a=n("4182"),r=function(t){return Object(a["a"])("/api/admin/product/getAll",t)},o=function(t){return Object(a["a"])("/api/admin/product/get",t)},i=function(t){return Object(a["a"])("/api/admin/product/update",t)},c=function(t){return Object(a["a"])("/api/admin/productQrcode/update",t)},u=function(t){return Object(a["a"])("/api/admin/productQrcode/delete",t)},d=function(t){return Object(a["a"])("/api/admin/user/getAll",t)},s=function(t){return Object(a["a"])("/api/admin/user/getDetail",t)},l=function(t){return Object(a["a"])("/api/admin/account/get",t)},p=function(t){return Object(a["a"])("/api/admin/account/getDetail",t)},f=function(t){return Object(a["a"])("/api/admin/orderHistory/get",t)},m=function(t){return Object(a["a"])("/api/admin/setting/getAll",t)},b=function(t){return Object(a["a"])("/api/admin/email/getPage",t)},h=function(t){return Object(a["a"])("/api/admin/flowUsage/getInDay",t)},g=function(t){return Object(a["a"])("/api/admin/account/randomPassword",t)},v=function(t){return Object(a["a"])("/api/admin/account/updatePassword",t)},A=function(t){return Object(a["a"])("/api/admin/account/updateTotalFlow",t)},y=function(t){return Object(a["a"])("/api/admin/account/updateExpiration",t)},w=function(t){return Object(a["a"])("/api/admin/user/updateInfo",t)},j=function(t){return Object(a["a"])("/api/admin/announcement/create",t)},O=function(t){return Object(a["a"])("/api/admin/announcement/getAll",t)},C=function(t){return Object(a["a"])("/api/admin/announcement/delete",t)}}}]);
//# sourceMappingURL=chunk-b333ca30.d143aa88.js.map