(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-dc9dc62e"],{"0751":function(t,a,n){"use strict";var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("div",{staticClass:"row"},[n("b-form-group",{staticClass:"col-12 col-sm-6"},[n("label",[t._v("邮箱：")]),n("b-form-input",{attrs:{readonly:!0,value:t.user.email}})],1),n("b-form-group",{staticClass:"col-12 col-sm-6"},[n("label",[t._v("类型：")]),n("b-form-select",{on:{change:function(a){t.applyStatusChanged()}},model:{value:t.user.type,callback:function(a){t.$set(t.user,"type",a)},expression:"user.type"}},[n("option",{domProps:{value:null}},[t._v("空白")]),n("option",{attrs:{value:"notified"}},[t._v("邮件通知过")]),n("option",{attrs:{value:"active"}},[t._v("已激活")]),n("option",{attrs:{value:"banned"}},[t._v("已禁用")])])],1),n("b-form-group",{staticClass:"col-12 col-sm-6"},[n("label",[t._v("用户名：")]),n("b-form-input",{attrs:{readonly:!0,value:t.user.username}})],1),n("b-form-group",{staticClass:"col-12 col-sm-6"},[n("label",[t._v("备注：")]),n("b-form-input",{on:{input:function(a){t.applyStatusChanged()}},model:{value:t.user.comment,callback:function(a){t.$set(t.user,"comment",a)},expression:"user.comment"}})],1)],1),n("b-button",{staticClass:"float-right",attrs:{variant:t.applyStatus},on:{click:function(a){t.applyChanges()}}},[t._v("应用")])],1)},o=[],s=n("be6c"),c={name:"userItem",props:{user:{type:Object,default:{}}},data:function(){return{applyStatus:"secondary"}},methods:{applyStatusChanged:function(){this.applyStatus="primary"},applyChanges:function(){var t=this;Object(s["u"])({userId:this.user.id,comment:this.user.comment,type:this.user.type}).then(function(a){t.applyStatus="secondary"})}},created:function(){this.applyStatus="secondary"}},r=c,i=n("2877"),u=Object(i["a"])(r,e,o,!1,null,null,null);u.options.__file="UserItem.vue";a["a"]=u.exports},"07e4":function(t,a,n){"use strict";var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("b-row",{staticClass:"my-2"},[n("div",{staticClass:"col-10 col-sm-5 row"},[n("label",{staticClass:"col-8 text-lg"},[t._v("流量单位:")]),n("b-select",{staticClass:"col-4",attrs:{value:t.flowUnit,options:t.unitOptions},on:{change:function(a){t.changeUnit(a)}}})],1),n("div",{staticClass:"col-12 col-sm-5 offset-sm-2"},[n("b-button",{staticClass:"mx-3",on:{click:function(a){t.$emit("selectDate",t.date.subtract(1,"day"))}}},[t._v("前一天")]),n("a-date-picker",{attrs:{allowClear:!1},on:{change:t.onDateChange},model:{value:t.date,callback:function(a){t.date=a},expression:"date"}})],1)]),n("ve-histogram",{attrs:{data:t.chartData,settings:t.chartSettings,extend:t.extend}})],1)},o=[],s=(n("ac4d"),n("8a81"),n("ac6a"),1024),c=1048576,r=1073741824,i={name:"accountDetail",data:function(){return this.chartSettings={metrics:["flow"],dimension:["hour"]},this.extend={series:{label:{show:!0,position:"top",formatter:this.formatFlow}}},{chartData:{columns:["hour","flow"],rows:[]},flowUnit:1,flowUnitText:"B",unitOptions:[{value:c,text:"MB"},{value:r,text:"GB"},{value:s,text:"KB"},{value:1,text:"B"}],date:null}},computed:{dateString:function(){return null===this.date?"":this.date.format("YYYY-MM-DD")}},methods:{setRecords:function(t){var a,n=!0,e=!1,o=void 0;try{for(var i,u=this.chartData.rows[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var l=i.value;l.flow=0}}catch(w){e=!0,o=w}finally{try{n||null==u.return||u.return()}finally{if(e)throw o}}var d=0,f=!0,p=!1,m=void 0;try{for(var b,v=t[Symbol.iterator]();!(f=(b=v.next()).done);f=!0){var h=b.value;a=this.chartData.rows[h.hour],a.flow+=h.flow,a.flow>d&&(d=a.flow)}}catch(w){p=!0,m=w}finally{try{f||null==v.return||v.return()}finally{if(p)throw m}}this.flowUnit=1,d>r?this.changeUnit(r):d>c?this.changeUnit(c):d>s?this.changeUnit(s):this.changeUnit(1)},onDateChange:function(t){this.$emit("selectDate",t)},setDate:function(t){this.date=this.$moment(t)},changeUnit:function(t){var a,n=this.flowUnit/t;this.flowUnit=t;var e=!0,o=!1,s=void 0;try{for(var c,r=this.unitOptions[Symbol.iterator]();!(e=(c=r.next()).done);e=!0){var i=c.value;if(i.value==this.flowUnit){this.flowUnitText=i.text.substring(0,1);break}}}catch(l){o=!0,s=l}finally{try{e||null==r.return||r.return()}finally{if(o)throw s}}for(var u=0;u<24;u++)a=this.chartData.rows[u],a.flow=a.flow*n},formatFlow:function(t){return t.value.toFixed(2)+this.flowUnitText}},created:function(){for(var t=0;t<24;t++)this.chartData.rows.push({hour:t,flow:0})}},u=i,l=n("2877"),d=Object(l["a"])(u,e,o,!1,null,null,null);d.options.__file="DayFlowUsage.vue";a["a"]=d.exports},"348b":function(t,a,n){"use strict";n.r(a);var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("div",{staticClass:"my-2"},[n("b-button",{attrs:{variant:"primary"},on:{click:function(a){t.$router.go(-1)}}},[t._v("\r\n      "+t._s("返回")+"\r\n    ")])],1),n("b-card",{staticClass:"my-2",attrs:{title:"网站用户信息"}},[n("user-item",{attrs:{user:t.user}})],1),n("b-card",{staticClass:"my-2",attrs:{title:"SS账户信息"}},[n("account-item",{attrs:{account:t.ad,ssAddress:t.ssAddress,accFlow:t.accFlow}})],1),n("b-card",{attrs:{title:"流量日统计"}},[n("day-flow-usage",{ref:"flowUsage",on:{selectDate:function(a){t.changeFlowDate(a)}}})],1)],1)},o=[],s=(n("cadf"),n("551c"),n("097d"),n("be6c")),c=n("446e"),r=n("883f"),i=n("0751"),u=n("07e4"),l={name:"accountDetail",components:{TextInput:c["a"],AccountItem:r["a"],UserItem:i["a"],DayFlowUsage:u["a"]},data:function(){return{ad:{},accFlow:{},user:{},ssAddress:""}},methods:{changeFlowDate:function(t){var a=this,n=this.$route.params.id;Object(s["j"])({accountId:n,date:t.format("YYYY-MM-DD")}).then(function(t){a.$refs.flowUsage.setRecords(t.records),a.$refs.flowUsage.setDate(1e3*t.date)})}},created:function(){var t=this,a=this.$route.params.id;Object(s["d"])({id:a}).then(function(a){"success"===a.status&&(t.ad=a.account,t.ad.email=a.user.email,t.accFlow=a.accountFlow,t.user=a.user,t.ssAddress="ss://"+btoa(a.ssAddress))}),this.changeFlowDate(this.$moment())}},d=l,f=n("2877"),p=Object(f["a"])(d,e,o,!1,null,null,null);p.options.__file="AccountDetail.vue";a["default"]=p.exports},"5dbc":function(t,a,n){var e=n("d3f4"),o=n("8b97").set;t.exports=function(t,a,n){var s,c=a.constructor;return c!==n&&"function"==typeof c&&(s=c.prototype)!==n.prototype&&e(s)&&o&&o(t,s),t}},"883f":function(t,a,n){"use strict";var e=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("b-card",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12 col-sm-9"},[n("account-basic-info",{attrs:{accountId:t.account.id,userEmail:t.account.email,port:t.account.port}}),n("div",{staticClass:"row py-2"},[n("div",{staticClass:"col-12 col-sm-4 text-left text-md"},[n("text-input",{attrs:{"input-prop":{title:"Host",icon:"fas fa-network-wired"}},model:{value:t.account.server,callback:function(a){t.$set(t.account,"server",a)},expression:"account.server"}})],1),n("div",{staticClass:"col-12 col-sm-4 text-left text-md"},[n("text-input",{attrs:{"input-prop":{title:"Password",icon:"fas fa-key"}},on:{valueChanged:function(a){t.isPasswordChanged=!0}},model:{value:t.account.password,callback:function(a){t.$set(t.account,"password",a)},expression:"account.password"}}),n("button",{staticClass:"btn btn-primary mx-2",attrs:{type:"button",disabled:!t.isPasswordChanged},on:{click:function(a){t.updatePassword()}}},[t._v(t._s("Update"))]),n("button",{staticClass:"btn btn-primary mx-2",attrs:{type:"button"},on:{click:function(a){t.randomPassword()}}},[t._v(t._s("Random"))])],1),n("div",{staticClass:"col-12 col-sm-4 text-left text-md"},[n("text-input",{attrs:{"input-prop":{title:"TotalFlow",icon:"fas fa-globe"},value:t.totalFlow},on:{valueChanged:function(a){t.onFlowChanged(a)}}}),n("button",{staticClass:"btn btn-primary mx-3",attrs:{disabled:!t.isFlowChanged},on:{click:function(a){t.updateFlow()}}},[t._v(t._s("Modify"))])],1)])],1),n("div",{staticClass:"col-12 col-sm-3 text-center"},[n("b-alert",{attrs:{variant:"primary",show:""}},[t._v("\r\n          使用 shadowsocks 手机客户端的“扫一扫”导入配置\r\n        ")]),n("qrcode-vue",{staticClass:"d-inline-block mx-auto",attrs:{value:t.ssAddress,size:200,level:"H"}})],1)])]),n("div",{staticClass:"row border-bottom py-2"},[n("div",{staticClass:"col-12 text-left text-lg"},[t._v(t._s("FlowUsage:")+"\r\n      "),n("b-progress",{staticClass:"mb-3",attrs:{max:t.totalFlow,"show-value":"",precision:1}},[n("b-progress-bar",{attrs:{value:t.$convertFlow(t.accFlow.flow,"GB"),variant:"primary"}}),n("b-progress-bar",{attrs:{value:t.totalFlow-t.$convertFlow(t.accFlow.flow,"GB"),variant:"success"}})],1)],1)]),n("div",{staticClass:"border-bottom my-2"},[n("div",{staticClass:"row pb-2",on:{click:function(a){t.showExpireModify()}}},[n("span",{staticClass:"col-4 text-left text-lg"},[t._v(t._s("Expire:"))]),n("span",{staticClass:"col-5 text-left text-md"},[t._v(t._s(t.$formatTime(t.account.expire)))]),n("button",{staticClass:"col-2 btn btn-primary py-0"},[t._v(t._s("Modify"))])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.isExpireModify,expression:"isExpireModify"}],staticClass:"border border-primary mt-3"},[n("div",{staticClass:"row my-2 mx-auto"},[n("button",{staticClass:"btn btn-secondary col mx-3",attrs:{value:"-1"},on:{click:function(a){t.modifyExpiration(-1)}}},[t._v(t._s("-1d"))]),n("button",{staticClass:"btn btn-secondary col mx-3",attrs:{value:"-7"},on:{click:function(a){t.modifyExpiration(-7)}}},[t._v(t._s("-7d"))]),n("button",{staticClass:"btn btn-secondary col mx-3",attrs:{value:"-15"},on:{click:function(a){t.modifyExpiration(-15)}}},[t._v(t._s("-15d"))]),n("button",{staticClass:"btn btn-secondary col mx-3",attrs:{value:"-30"},on:{click:function(a){t.modifyExpiration(-30)}}},[t._v(t._s("-30d"))]),n("button",{staticClass:"btn btn-success col mx-3",on:{click:function(a){t.acc_time_custom("-")}}},[t._v(t._s("Custom Sub"))])]),n("div",{staticClass:"row my-2 mx-auto"},[n("button",{staticClass:"btn btn-primary col mx-3",attrs:{value:"+1"},on:{click:function(a){t.modifyExpiration(1)}}},[t._v(t._s("+1d"))]),n("button",{staticClass:"btn btn-primary col mx-3",attrs:{value:"+7"},on:{click:function(a){t.modifyExpiration(7)}}},[t._v(t._s("+7d"))]),n("button",{staticClass:"btn btn-primary col mx-3",attrs:{value:"+15"},on:{click:function(a){t.modifyExpiration(15)}}},[t._v(t._s("+15d"))]),n("button",{staticClass:"btn btn-primary col mx-3",attrs:{value:"+30"},on:{click:function(a){t.modifyExpiration(30)}}},[t._v(t._s("+30d"))]),n("button",{staticClass:"btn btn-success col mx-3",on:{click:function(a){t.acc_time_custom("+")}}},[t._v(t._s("Custom Add"))])])])]),n("div",{staticClass:"row border-bottom my-2"},[n("span",{staticClass:"col-6 text-left text-lg"},[t._v(t._s("Status:")+" ")]),n("span",{staticClass:"col-6 text-left text-md"},[t._v(t._s(t.account.status))])]),n("div",{staticClass:"row border-bottom my-2"},[n("span",{staticClass:"col-6 text-left text-lg"},[t._v(t._s("Create Time:")+" ")]),n("span",{staticClass:"col-6 text-left text-md"},[t._v(t._s(t.$formatTime(t.account.createTime)))])]),t.account.userId?n("div",{staticClass:"row border-bottom my-2"},[n("span",{staticClass:"col-6 text-left text-lg"},[t._v(t._s("Last Connected:")+" ")]),n("span",{staticClass:"col-6 text-left text-md"},[t._v(t._s(t.$formatTime(t.accFlow.updateTime)))])]):t._e()],1)},o=[],s=n("be6c"),c=n("446e"),r=function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("div",{staticClass:"row border-bottom py-2"},[n("div",{staticClass:"col-12 col-sm-4 text-left text-md"},[n("text-input",{attrs:{"input-prop":{title:"Account",icon:"fas fa-user-circle"},readonly:!0},model:{value:t.accountId,callback:function(a){t.accountId=a},expression:"accountId"}})],1),n("div",{staticClass:"col-12 col-sm-4 text-left text-md"},[n("text-input",{attrs:{"input-prop":{title:"Belongs To:",icon:"far fa-user"},readonly:!0},model:{value:t.userEmail,callback:function(a){t.userEmail=a},expression:"userEmail"}})],1),n("div",{staticClass:"col-12 col-sm-4 text-left text-md"},[n("text-input",{attrs:{"input-prop":{title:"Port",icon:"fas fa-ethernet"},readonly:!0},model:{value:t.port,callback:function(a){t.port=a},expression:"port"}})],1)])])},i=[],u=(n("c5f6"),{name:"accountBasicInfo",components:{TextInput:c["a"]},props:{accountId:Number,userEmail:String,port:Number}}),l=u,d=n("2877"),f=Object(d["a"])(l,r,i,!1,null,null,null);f.options.__file="AccountBasicInfo.vue";var p=f.exports,m=n("d7b0"),b=1073741824,v={name:"accountDetail",components:{TextInput:c["a"],AccountBasicInfo:p,QrcodeVue:m["a"]},props:{account:{type:Object,default:{}},accFlow:{type:Object,default:{}},ssAddress:{type:String,default:""}},data:function(){return{isExpireModify:!1,isPasswordChanged:!1,isFlowChanged:!1}},computed:{totalFlow:function(){return this.account.totalFlow/b}},methods:{showExpireModify:function(){this.isExpireModify=!this.isExpireModify},modifyExpiration:function(t){var a=this;Object(s["p"])({port:this.account.port,days:t}).then(function(t){a.account.expire=t.nexpire})},onFlowChanged:function(t){this.isFlowChanged=!0,this.account.totalFlow=t*b},updateFlow:function(){var t=this;Object(s["q"])({port:this.account.port,flow:this.account.totalFlow,flowUnit:1}).then(function(a){t.isFlowChanged=!1})},updatePassword:function(t){var a=this;Object(s["r"])({password:this.account.password,port:this.account.port}).then(function(t){a.isPasswordChanged=!1})},randomPassword:function(){var t=this;Object(s["o"])({port:this.account.port}).then(function(a){"success"===a.status&&(t.account.password=a.password,t.isFlowChanged=!1)})}}},h=v,w=Object(d["a"])(h,e,o,!1,null,null,null);w.options.__file="AccountItem.vue";a["a"]=w.exports},"8b97":function(t,a,n){var e=n("d3f4"),o=n("cb7c"),s=function(t,a){if(o(t),!e(a)&&null!==a)throw TypeError(a+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,a,e){try{e=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),e(t,[]),a=!(t instanceof Array)}catch(o){a=!0}return function(t,n){return s(t,n),a?t.__proto__=n:e(t,n),t}}({},!1):void 0),check:s}},aa77:function(t,a,n){var e=n("5ca1"),o=n("be13"),s=n("79e5"),c=n("fdef"),r="["+c+"]",i="​",u=RegExp("^"+r+r+"*"),l=RegExp(r+r+"*$"),d=function(t,a,n){var o={},r=s(function(){return!!c[t]()||i[t]()!=i}),u=o[t]=r?a(f):c[t];n&&(o[n]=u),e(e.P+e.F*r,"String",o)},f=d.trim=function(t,a){return t=String(o(t)),1&a&&(t=t.replace(u,"")),2&a&&(t=t.replace(l,"")),t};t.exports=d},be6c:function(t,a,n){"use strict";n.d(a,"f",function(){return o}),n.d(a,"m",function(){return s}),n.d(a,"s",function(){return c}),n.d(a,"t",function(){return r}),n.d(a,"c",function(){return i}),n.d(a,"h",function(){return u}),n.d(a,"n",function(){return l}),n.d(a,"e",function(){return d}),n.d(a,"d",function(){return f}),n.d(a,"l",function(){return p}),n.d(a,"g",function(){return m}),n.d(a,"k",function(){return b}),n.d(a,"j",function(){return v}),n.d(a,"o",function(){return h}),n.d(a,"r",function(){return w}),n.d(a,"q",function(){return x}),n.d(a,"p",function(){return y}),n.d(a,"u",function(){return _}),n.d(a,"a",function(){return g}),n.d(a,"i",function(){return C}),n.d(a,"b",function(){return F});n("cadf"),n("551c"),n("097d");var e=n("4182"),o=function(t){return Object(e["a"])("/api/admin/product/getAll",t)},s=function(t){return Object(e["a"])("/api/admin/product/get",t)},c=function(t){return Object(e["a"])("/api/admin/product/update",t)},r=function(t){return Object(e["a"])("/api/admin/productQrcode/update",t)},i=function(t){return Object(e["a"])("/api/admin/productQrcode/delete",t)},u=function(t){return Object(e["a"])("/api/admin/user/getAll",t)},l=function(t){return Object(e["a"])("/api/admin/user/getDetail",t)},d=function(t){return Object(e["a"])("/api/admin/account/get",t)},f=function(t){return Object(e["a"])("/api/admin/account/getDetail",t)},p=function(t){return Object(e["a"])("/api/admin/orderHistory/get",t)},m=function(t){return Object(e["a"])("/api/admin/setting/getAll",t)},b=function(t){return Object(e["a"])("/api/admin/email/getPage",t)},v=function(t){return Object(e["a"])("/api/admin/flowUsage/getInDay",t)},h=function(t){return Object(e["a"])("/api/admin/account/randomPassword",t)},w=function(t){return Object(e["a"])("/api/admin/account/updatePassword",t)},x=function(t){return Object(e["a"])("/api/admin/account/updateTotalFlow",t)},y=function(t){return Object(e["a"])("/api/admin/account/updateExpiration",t)},_=function(t){return Object(e["a"])("/api/admin/user/updateInfo",t)},g=function(t){return Object(e["a"])("/api/admin/announcement/create",t)},C=function(t){return Object(e["a"])("/api/admin/announcement/getAll",t)},F=function(t){return Object(e["a"])("/api/admin/announcement/delete",t)}},c5f6:function(t,a,n){"use strict";var e=n("7726"),o=n("69a8"),s=n("2d95"),c=n("5dbc"),r=n("6a99"),i=n("79e5"),u=n("9093").f,l=n("11e9").f,d=n("86cc").f,f=n("aa77").trim,p="Number",m=e[p],b=m,v=m.prototype,h=s(n("2aeb")(v))==p,w="trim"in String.prototype,x=function(t){var a=r(t,!1);if("string"==typeof a&&a.length>2){a=w?a.trim():f(a,3);var n,e,o,s=a.charCodeAt(0);if(43===s||45===s){if(n=a.charCodeAt(2),88===n||120===n)return NaN}else if(48===s){switch(a.charCodeAt(1)){case 66:case 98:e=2,o=49;break;case 79:case 111:e=8,o=55;break;default:return+a}for(var c,i=a.slice(2),u=0,l=i.length;u<l;u++)if(c=i.charCodeAt(u),c<48||c>o)return NaN;return parseInt(i,e)}}return+a};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var a=arguments.length<1?0:t,n=this;return n instanceof m&&(h?i(function(){v.valueOf.call(n)}):s(n)!=p)?c(new b(x(a)),n,m):x(a)};for(var y,_=n("9e1e")?u(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),g=0;_.length>g;g++)o(b,y=_[g])&&!o(m,y)&&d(m,y,l(b,y));m.prototype=v,v.constructor=m,n("2aba")(e,p,m)}},fdef:function(t,a){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-dc9dc62e.447f6ae7.js.map