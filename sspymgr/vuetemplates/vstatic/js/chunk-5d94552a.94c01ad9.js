(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5d94552a"],{"09fc":function(t,e,n){(function(t){var i="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,a=Function.prototype.apply;function c(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new c(a.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new c(a.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},c.prototype.unref=c.prototype.ref=function(){},c.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n("c8ba"))},"13d7":function(t,e,n){},1602:function(t,e,n){"use strict";n.d(e,"h",function(){return a}),n.d(e,"j",function(){return c}),n.d(e,"i",function(){return o}),n.d(e,"d",function(){return r}),n.d(e,"a",function(){return s}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return l}),n.d(e,"c",function(){return d}),n.d(e,"b",function(){return f}),n.d(e,"f",function(){return p});var i=n("4182"),a=function(t){return Object(i["a"])("/api/user/accountDetail",t)},c=function(t){return Object(i["a"])("/api/user/updatePassword",t)},o=function(t){return Object(i["a"])("/api/user/account/updatePassword",t)},r=function(t){return Object(i["a"])("/api/user/product/getAll",t)},s=function(t){return Object(i["a"])("/api/user/product/canPlace",t)},u=function(t){return Object(i["a"])("/api/user/product/getDetail",t)},l=function(t){return Object(i["a"])("/api/user/flowUsage/getInDay",t)},d=function(t){return Object(i["a"])("/api/user/announcement/getAll",t)},f=function(t){return Object(i["a"])("/api/user/product/confirm",t)},p=function(t){return Object(i["a"])("/api/user/orderHistory/get",t)}},4362:function(t,e,n){e.nextTick=function(t){setTimeout(t,0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(t){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,i="/";e.cwd=function(){return i},e.chdir=function(e){t||(t=n("b69a")),i=t.resolve(e,i)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},"5dad":function(t,e,n){"use strict";var i=n("13d7"),a=n.n(i);a.a},6017:function(t,e,n){(function(t,e){(function(t,n){"use strict";if(!t.setImmediate){var i,a=1,c={},o=!1,r=t.document,s=Object.getPrototypeOf&&Object.getPrototypeOf(t);s=s&&s.setTimeout?s:t,"[object process]"==={}.toString.call(t.process)?p():m()?v():t.MessageChannel?b():r&&"onreadystatechange"in r.createElement("script")?g():h(),s.setImmediate=u,s.clearImmediate=l}function u(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return c[a]=o,i(a),a++}function l(t){delete c[t]}function d(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i);break}}function f(t){if(o)setTimeout(f,0,t);else{var e=c[t];if(e){o=!0;try{d(e)}finally{l(t),o=!1}}}}function p(){i=function(t){e.nextTick(function(){f(t)})}}function m(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function v(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"===typeof n.data&&0===n.data.indexOf(e)&&f(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),i=function(n){t.postMessage(e+n,"*")}}function b(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;f(e)},i=function(e){t.port2.postMessage(e)}}function g(){var t=r.documentElement;i=function(e){var n=r.createElement("script");n.onreadystatechange=function(){f(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function h(){i=function(t){setTimeout(f,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,n("c8ba"),n("4362"))},"69bc":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("loading-modal",{model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}}),n("div",{staticClass:"text-primary text-center row mx-0"},[n("div",{staticClass:"col-6 col-sm-3"},[n("b-button",{on:{click:function(e){t.$router.push({path:"/product"})}}},[t._v("选择其他方案")])],1),n("div",{staticClass:"col-6 col-sm-3 h3"},[t._v("价格：￥"+t._s(t.price))]),n("div",{staticClass:"col-6 col-sm-3 h3"},[t._v("流量："+t._s(t.$formatFlow(t.product.flow,"MB")))]),n("div",{staticClass:"col-6 col-sm-3 h3"},[t._v(t._s("时长：")+" "+t._s(t.$formatTimeFromSeconds(t.product.duration)))])]),n("hr"),t.alipay?n("b-card",[n("div",[n("div",{staticClass:"text-center",attrs:{id:"alipay_qrcode"}},[n("p",[t._v("扫一扫付款（元）")]),n("p",{staticClass:"h3 text-danger font-weight-bold"},[t._v(t._s(t.price))]),n("div",{staticClass:"mx-auto card py-1",staticStyle:{width:"220px"}},[n("img",{staticClass:"d-block qrcode-img-fixed mx-auto",staticStyle:{"vertical-align":"top"},attrs:{src:"data:image/png;base64, "+t.alipay.qrcode,alt:"二维码已过期"}}),n("div",{staticStyle:{height:"42px"}},[n("img",{staticClass:"pb-4",attrs:{src:"https://t.alipayobjects.com/images/T1bdtfXfdiXXXXXXXX.png",alt:"扫一扫标识"}}),n("div",{staticClass:"d-inline-block"},[t._v("\r\n              打开手机支付宝"),n("br"),t._v("扫一扫继续付款\r\n            ")])]),n("div",{staticClass:"timeout",class:{"d-none":t.remainSeconds>0}},[t._v("二维码已过期")])]),n("a",{staticStyle:{color:"#a6a6a6"},attrs:{href:"https://mobile.alipay.com/index.htm",target:"_blank"}},[t._v("\r\n          首次使用请下载手机支付宝")]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.remainSeconds>0,expression:"remainSeconds>0"}]},[t._v("请于 "+t._s(t.remainSecondsText)+" 内支付")])])])]):t._e(),t.wechatpay?n("b-card",[n("div",{staticClass:"d-block mx-3"},[n("h3",{staticClass:"d-block text-center"},[t._v(t._s("Wechatpay"))]),n("img",{staticClass:"d-block qrcode-img-fixed mx-auto",attrs:{src:"data:image/png;base64, "+t.wechatpay.qrcode}})])]):t._e(),n("div",{staticClass:"pt-2"},[n("b-button",{staticClass:"float-right mr-4",attrs:{variant:"primary",type:"button",disabled:!t.completed||0===t.remainSeconds},on:{click:function(e){t.confirmOrder()}}},[t._v("\r\n      "+t._s(t.confirmOrderText)+"\r\n    ")])],1),n("b-modal",{attrs:{title:"完成订单","no-close-on-backdrop":!0,"ok-only":!0},on:{ok:function(e){t.completeOrder()}},model:{value:t.orderHint,callback:function(e){t.orderHint=e},expression:"orderHint"}},[n("p",[t._v(t._s(t.orderHintText))])])],1)},a=[],c=(n("ac4d"),n("8a81"),n("ac6a"),n("1602")),o=n("09fc"),r=n("fb63"),s=2e4,u={name:"userProductDetail",components:{LoadingModal:r["a"]},data:function(){return{product:{},alipay:null,wechatpay:null,completed:!1,orderHint:!1,orderHintText:"",remainSeconds:90,confirmOrderText:"确认支付",loading:!0}},computed:{pid:function(){return parseInt(this.$route.params.id)},price:function(){return this.product.price?this.product.price.toFixed(1):5},remainSecondsText:function(){return this.remainSeconds>60?"1 分钟":this.remainSeconds+" 秒"}},created:function(){var t=this;Object(c["a"])().then(function(e){!1===e.canPlaceOrder&&t.$router.go(-1)}),Object(c["g"])({product:this.pid}).then(function(e){if(t.loading=!1,"success"===e.status){t.product=e.product;var n=!0,i=!1,a=void 0;try{for(var c,r=e.qrcodes[Symbol.iterator]();!(n=(c=r.next()).done);n=!0){var u=c.value;u&&("alipay"===u.category?t.alipay=u:"wechatpay"===u.category&&(t.wechatpay=u))}}catch(d){i=!0,a=d}finally{try{n||null==r.return||r.return()}finally{if(i)throw a}}var l=Object(o["setInterval"])(function(){t.remainSeconds-=1,0==t.remainSeconds&&(t.confirmOrderText="二维码已失效",Object(o["clearInterval"])(l))},1e3);Object(o["setTimeout"])(function(){t.completed=!0},s)}else alert("Invalid Product")})},methods:{cancleOrder:function(){this.$route.go(-1)},confirmOrder:function(){var t=this;Object(c["b"])({product:this.pid}).then(function(e){"success"===e.status?t.orderHintText="完成订单，从现在起你可以使用翻墙服务 30 天。          点击下方的按钮，查看服务器、账户和密码":t.orderHintText="订单失败，请联系管理员",t.orderHint=!0})},completeOrder:function(){this.$router.push({path:"/account"})}}},l=u,d=(n("5dad"),n("2877")),f=Object(d["a"])(l,i,a,!1,null,null,null);f.options.__file="ProductDetail.vue";e["default"]=f.exports},b69a:function(t,e,n){(function(t){function n(t,e){for(var n=0,i=t.length-1;i>=0;i--){var a=t[i];"."===a?t.splice(i,1):".."===a?(t.splice(i,1),n++):n&&(t.splice(i,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a=function(t){return i.exec(t).slice(1)};function c(t,e){if(t.filter)return t.filter(e);for(var n=[],i=0;i<t.length;i++)e(t[i],i,t)&&n.push(t[i]);return n}e.resolve=function(){for(var e="",i=!1,a=arguments.length-1;a>=-1&&!i;a--){var o=a>=0?arguments[a]:t.cwd();if("string"!==typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(e=o+"/"+e,i="/"===o.charAt(0))}return e=n(c(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),a="/"===o(t,-1);return t=n(c(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&a&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(c(t,function(t,e){if("string"!==typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function i(t){for(var e=0;e<t.length;e++)if(""!==t[e])break;for(var n=t.length-1;n>=0;n--)if(""!==t[n])break;return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var a=i(t.split("/")),c=i(n.split("/")),o=Math.min(a.length,c.length),r=o,s=0;s<o;s++)if(a[s]!==c[s]){r=s;break}var u=[];for(s=r;s<a.length;s++)u.push("..");return u=u.concat(c.slice(r)),u.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=a(t),n=e[0],i=e[1];return n||i?(i&&(i=i.substr(0,i.length-1)),n+i):"."},e.basename=function(t,e){var n=a(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return a(t)[3]};var o="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(this,n("4362"))},fb63:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("b-modal",{attrs:{title:t.title,visible:t.loading,"ok-only":!0}},[n("div",[n("a-spin",{attrs:{size:"large"}},[t._v("loading")])],1)])},a=[],c={name:"loadingModal",props:{title:{type:String,default:"加载数据中"},loading:{type:Boolean,default:!0}},model:{prop:"loading"}},o=c,r=n("2877"),s=Object(r["a"])(o,i,a,!1,null,null,null);s.options.__file="LoadingModal.vue";e["a"]=s.exports}}]);
//# sourceMappingURL=chunk-5d94552a.94c01ad9.js.map